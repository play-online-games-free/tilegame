<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tile Flipping Game</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
        }

        .game-info {
            margin-bottom: 20px;
            font-size: 1.2em;
        }

        #game-board {
            display: grid;
            /* We'll set grid-template-columns in JS based on number of tiles */
            gap: 10px;
            perspective: 1000px; /* For 3D flip effect */
            margin-bottom: 20px;
        }

        .tile {
            width: 100px;
            height: 100px;
            position: relative;
            cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            border-radius: 8px;
        }

        .tile.flipped {
            transform: rotateY(180deg);
        }

        .tile-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden; /* Hides the back of the element when flipped */
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            overflow: hidden; /* Ensures images don't spill out */
        }

        .tile-back {
            background-color: #4A90E2; /* Or use background-image for card-back.png */
            /* background-image: url('images/card-back.png'); */
            /* background-size: cover; */
            color: white;
            font-size: 2em;
            font-weight: bold;
            border: 2px solid #357ABD;
        }

        .tile-front {
            background-color: #fff;
            transform: rotateY(180deg); /* Initially hidden */
            border: 2px solid #ccc;
        }

        .tile-front img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
        }

        .tile.matched {
            cursor: default;
            opacity: 0.7; /* Visually indicate it's matched */
            box-shadow: 0 0 0 2px limegreen; /* Green border for matched */
        }

        /* No hover effect or further interaction on matched tiles */
        .tile.matched:hover {
            transform: none; /* Keep its current state (flipped or not) */
        }


        #reset-button {
            padding: 10px 20px;
            font-size: 1em;
            color: white;
            background-color: #d9534f;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #reset-button:hover {
            background-color: #c9302c;
        }
    </style>
</head>
<body>
    <h1>Memory Game</h1>
    <div class="game-info">
        <p>Moves: <span id="moves-count">0</span></p>
    </div>
    <div id="game-board">
        <!-- Tiles will be generated by JavaScript -->
    </div>
    <button id="reset-button">Reset Game</button>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const gameBoard = document.getElementById('game-board');
            const resetButton = document.getElementById('reset-button');
            const movesCountSpan = document.getElementById('moves-count');

            // --- Image Configuration ---
            // Make sure you have these images in an 'images' folder
            // or provide full URLs if they are hosted elsewhere.
            const baseImageNames = [
                'Desert.jpg', 'Hydrangeas.jpg', 'Jellyfish.jpg',
                'img4.png', 'img5.png', 'img6.png'
                // Add more image names here for a bigger game (e.g., 'img7.png', 'img8.png')
            ];
            const imagePath = 'images/'; // Path to your images folder

            let images = []; // This will hold the duplicated and shuffled image names
            let firstCard = null;
            let secondCard = null;
            let lockBoard = false; // Prevents clicking more than two cards
            let matchesFound = 0;
            let moves = 0;
            let totalPairs = baseImageNames.length; // Total pairs to find

            function createImageArray() {
                // Duplicate images to create pairs
                images = [...baseImageNames, ...baseImageNames];
                // Add full path
                images = images.map(name => imagePath + name);
            }

            function shuffle(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]]; // ES6 swap
                }
            }

            function createBoard() {
                gameBoard.innerHTML = ''; // Clear previous board
                shuffle(images);
                matchesFound = 0;
                moves = 0;
                updateMovesCount();
                lockBoard = false;
                firstCard = null;
                secondCard = null;

                // Adjust grid layout based on number of tiles
                const numTiles = images.length;
                let cols = 4; // Default columns
                if (numTiles === 12) cols = 4;      // 4x3 for 6 pairs
                else if (numTiles === 16) cols = 4; // 4x4 for 8 pairs
                else if (numTiles === 8) cols = 4;  // 4x2 for 4 pairs
                else if (numTiles === 6) cols = 3;  // 3x2 for 3 pairs
                else if (numTiles === 10) cols = 5; // 5x2 for 5 pairs
                else if (numTiles === 14) cols = 7; // 7x2 for 7 pairs
                // Add more conditions or make it more dynamic, e.g., Math.ceil(Math.sqrt(numTiles))
                
                gameBoard.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;


                images.forEach(imageSrc => {
                    const tile = document.createElement('div');
                    tile.classList.add('tile');
                    tile.dataset.image = imageSrc; // Store image source for matching

                    const tileBack = document.createElement('div');
                    tileBack.classList.add('tile-face', 'tile-back');
                    // tileBack.textContent = '?'; // Or use CSS background for card-back.png

                    const tileFront = document.createElement('div');
                    tileFront.classList.add('tile-face', 'tile-front');
                    const img = document.createElement('img');
                    img.src = imageSrc;
                    img.alt = "Tile Image";
                    tileFront.appendChild(img);

                    tile.appendChild(tileBack);
                    tile.appendChild(tileFront);

                    tile.addEventListener('click', handleTileClick);
                    gameBoard.appendChild(tile);
                });
            }

            function handleTileClick(event) {
                if (lockBoard) return;
                const clickedCard = event.currentTarget;

                // Ignore click if card is already flipped (but not yet part of a pair check),
                // or if it's already matched.
                if (clickedCard === firstCard || clickedCard.classList.contains('matched')) return;

                clickedCard.classList.add('flipped');

                if (!firstCard) {
                    firstCard = clickedCard;
                    return;
                }

                secondCard = clickedCard;
                lockBoard = true; // Lock board while checking
                incrementMoves();
                checkForMatch();
            }

            function checkForMatch() {
                const isMatch = firstCard.dataset.image === secondCard.dataset.image;

                if (isMatch) {
                    disableCards();
                } else {
                    unflipCards();
                }
            }

            function disableCards() {
                firstCard.classList.add('matched');
                secondCard.classList.add('matched');
                // No need to remove event listener if .matched class prevents clicks via CSS or JS logic

                matchesFound++;
                resetBoardState();
                checkWinCondition();
            }

            function unflipCards() {
                setTimeout(() => {
                    if (firstCard) firstCard.classList.remove('flipped');
                    if (secondCard) secondCard.classList.remove('flipped');
                    resetBoardState();
                }, 1000); // Wait 1 second before flipping back
            }

            function resetBoardState() {
                [firstCard, secondCard] = [null, null];
                lockBoard = false;
            }

            function incrementMoves() {
                moves++;
                updateMovesCount();
            }

            function updateMovesCount() {
                movesCountSpan.textContent = moves;
            }

            function checkWinCondition() {
                if (matchesFound === totalPairs) {
                    setTimeout(() => {
                        // Using a more user-friendly modal or message would be better than alert
                        alert(`Congratulations! You won in ${moves} moves!`);
                    }, 500); // Short delay before alert
                }
            }

            function startGame() {
                totalPairs = baseImageNames.length; // Recalculate in case baseImageNames changes
                createImageArray();
                createBoard();
            }

            resetButton.addEventListener('click', startGame);

            // Initial game start
            startGame();
        });
    </script>
</body>
</html>
